# Dployr Base Configuration
# Copy this to config.toml and customize for your deployment

[deployment]
# Target platform: "cloudflare" | "self-hosted" | "fly" | "railway"
platform = "self-hosted"

[server]
port = 3000
host = "0.0.0.0"
base_url = "https://base.dployr.dev"
app_url = "https://app.dployr.dev"

[database]
# Type: "d1" | "sqlite"
type = "sqlite"
# For Cloudflare D1, this is auto-detected from wrangler.toml
# For SQLite, provide file path
path = "/var/lib/dployr-base/dployr.db"
# Auto-run migrations on startup
auto_migrate = true

[kv]
# Type: "cloudflare" | "redis" | "upstash" | "memory"
type = "redis"
# For Cloudflare KV, auto-detected from wrangler.toml
# For Redis/Upstash, provide connection details
url = "redis://localhost:6379"
# Optional: Upstash REST API (serverless-friendly)
# rest_url = "https://..."
# rest_token = "..."

[storage]
# Type: "r2" | "s3" | "filesystem" | "azure" | "digitalocean"
type = "filesystem"
# For filesystem
path = "./data/storage"
# For S3-compatible
# bucket = "dployr-logs"
# region = "us-east-1"
# access_key = ""
# secret_key = ""

[durable_objects]
# Only for Cloudflare Workers
# For self-hosted, we use in-memory state + periodic snapshots to DB
enabled = false
# Snapshot interval (seconds) - only for self-hosted
snapshot_interval = 60

[auth]
# OAuth providers
google_client_id = ""
google_client_secret = ""
github_client_id = ""
github_client_secret = ""

[email]
# Email provider: "zepto" | "resend" | "smtp"
provider = "zepto"
zepto_api_key = ""
# For SMTP
# smtp_host = ""
# smtp_port = 587
# smtp_user = ""
# smtp_pass = ""

[security]
# Session TTL (seconds)
session_ttl = 86400
# JWT signing algorithm
jwt_algorithm = "RS256"
# Rate limiting (requests per minute)
global_rate_limit = 100
strict_rate_limit = 10
